<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokémon Type Quiz</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f0f0f0;
            transform: scale(1.5);
            transform-origin: top center;
            margin: 100px 0;
        }
        #menu, #scores-menu {
            margin-top: 50px;
        }
        #menu-title, #scores-title {
            font-size: 36px;
            margin-bottom: 20px;
        }
        /* Standardized button styling */
        .btn {
            padding: 15px 30px;
            font-size: 18px;
            margin: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            min-width: 150px;
        }
        .btn:hover {
            background-color: #45a049;
        }
        #scores-menu {
            display: none;
        }
        #scores-table {
            margin: 20px auto;
            border-collapse: collapse;
            width: 80%;
            max-width: 600px;
        }
        #scores-table th, #scores-table td {
            border: 1px solid #ddd;
            padding: 8px;
            font-size: 16px;
        }
        #scores-table th {
            background-color: #4CAF50;
            color: white;
        }
        #quiz {
            display: none;
            position: relative;
            min-height: 600px;
        }
        #question {
            font-size: 24px;
            margin: 20px;
        }
        #slots {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px;
        }
        .slot {
            width: 100px;
            height: 100px;
            border: 2px dashed #333;
            background-color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        #types {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin: 20px;
            max-width: 810px;
            margin-left: auto;
            margin-right: auto;
        }
        .type-icon {
            width: 80px;
            cursor: pointer;
        }
        /* Button container for positioning */
       #button-container {
    position: fixed; /* Change from absolute to fixed */
    bottom: 30px; /* Increase from 10px */
    left: 50%; /* Center horizontally */
    transform: translateX(-50%); /* Center adjustment */
    display: flex;
    gap: 10px;
    z-index: 100; /* Ensure buttons appear above other content */
}
        #next-container {
            margin: 20px auto;
            text-align: center;
        }
        #next {
            display: none;
        }
        #result {
            font-size: 18px;
            margin: 20px;
        }
        #score, #question-counter {
            font-size: 20px;
            margin: 10px;
        }
    </style>
</head>
<body>
    <div id="menu">
        <div id="menu-title">Type Quiz</div>
        <button id="play-button" class="btn">PLAY</button><br>
        <button id="difficulty-button" class="btn">EASY</button><br>
        <button id="scores-button" class="btn">SCORES</button>
    </div>
    <div id="scores-menu">
        <div id="scores-title">High Scores</div>
        <table id="scores-table">
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>EASY</th>
                    <th>NORMAL</th>
                    <th>HARD</th>
                </tr>
            </thead>
            <tbody id="scores-body"></tbody>
        </table>
        <button id="scores-back-button" class="btn">Back</button>
    </div>
    <div id="quiz">
        <div id="score">Score: <span id="score-value">0</span></div>
        <div id="question-counter">Question <span id="current-question">1</span>/<span id="total-questions"></span></div>
        <div id="question"></div>
        <div id="slots"></div>
        <div id="types">
            <img src="https://pokedoku-space.nyc3.cdn.digitaloceanspaces.com/resources/pokemon_types/normal.png" class="type-icon" data-type="normal">
            <img src="https://pokedoku-space.nyc3.cdn.digitaloceanspaces.com/resources/pokemon_types/fire.png" class="type-icon" data-type="fire">
            <img src="https://pokedoku-space.nyc3.cdn.digitaloceanspaces.com/resources/pokemon_types/water.png" class="type-icon" data-type="water">
            <img src="https://pokedoku-space.nyc3.cdn.digitaloceanspaces.com/resources/pokemon_types/grass.png" class="type-icon" data-type="grass">
            <img src="https://pokedoku-space.nyc3.cdn.digitaloceanspaces.com/resources/pokemon_types/electric.png" class="type-icon" data-type="electric">
            <img src="https://pokedoku-space.nyc3.cdn.digitaloceanspaces.com/resources/pokemon_types/ice.png" class="type-icon" data-type="ice">
            <img src="https://pokedoku-space.nyc3.cdn.digitaloceanspaces.com/resources/pokemon_types/fighting.png" class="type-icon" data-type="fighting">
            <img src="https://pokedoku-space.nyc3.cdn.digitaloceanspaces.com/resources/pokemon_types/poison.png" class="type-icon" data-type="poison">
            <img src="https://pokedoku-space.nyc3.cdn.digitaloceanspaces.com/resources/pokemon_types/ground.png" class="type-icon" data-type="ground">
            <img src="https://pokedoku-space.nyc3.cdn.digitaloceanspaces.com/resources/pokemon_types/flying.png" class="type-icon" data-type="flying">
            <img src="https://pokedoku-space.nyc3.cdn.digitaloceanspaces.com/resources/pokemon_types/psychic.png" class="type-icon" data-type="psychic">
            <img src="https://pokedoku-space.nyc3.cdn.digitaloceanspaces.com/resources/pokemon_types/bug.png" class="type-icon" data-type="bug">
            <img src="https://pokedoku-space.nyc3.cdn.digitaloceanspaces.com/resources/pokemon_types/rock.png" class="type-icon" data-type="rock">
            <img src="https://pokedoku-space.nyc3.cdn.digitaloceanspaces.com/resources/pokemon_types/ghost.png" class="type-icon" data-type="ghost">
            <img src="https://pokedoku-space.nyc3.cdn.digitaloceanspaces.com/resources/pokemon_types/dragon.png" class="type-icon" data-type="dragon">
            <img src="https://pokedoku-space.nyc3.cdn.digitaloceanspaces.com/resources/pokemon_types/dark.png" class="type-icon" data-type="dark">
            <img src="https://pokedoku-space.nyc3.cdn.digitaloceanspaces.com/resources/pokemon_types/steel.png" class="type-icon" data-type="steel">
            <img src="https://pokedoku-space.nyc3.cdn.digitaloceanspaces.com/resources/pokemon_types/fairy.png" class="type-icon" data-type="fairy">
        </div>
        <div id="next-container">
            <button id="next" class="btn" onclick="nextQuestion()">Next</button>
        </div>
        <div id="result"></div>
        <div id="button-container">
            <button id="quiz-back-button" class="btn">Back</button>
            <button id="check" class="btn" onclick="checkAnswer()">Check</button>
        </div>
    </div>

    <script>
        const allQuestions = [
            { question: "Against which types is Normal effective?", answers: [], completed: false },
            { question: "Against which types is Fire effective?", answers: ["grass", "ice", "bug", "steel"], completed: false },
            { question: "Against which types is Water effective?", answers: ["fire", "ground", "rock"], completed: false },
            { question: "Against which types is Grass effective?", answers: ["water", "ground", "rock"], completed: false },
            { question: "Against which types is Electric effective?", answers: ["water", "flying"], completed: false },
            { question: "Against which types is Ice effective?", answers: ["grass", "ground", "flying", "dragon"], completed: false },
            { question: "Against which types is Fighting effective?", answers: ["normal", "ice", "rock", "dark", "steel"], completed: false },
            { question: "Against which types is Poison effective?", answers: ["grass", "fairy"], completed: false },
            { question: "Against which types is Ground effective?", answers: ["fire", "electric", "poison", "rock", "steel"], completed: false },
            { question: "Against which types is Flying effective?", answers: ["grass", "fighting", "bug"], completed: false },
            { question: "Against which types is Psychic effective?", answers: ["fighting", "poison"], completed: false },
            { question: "Against which types is Bug effective?", answers: ["grass", "psychic", "dark"], completed: false },
            { question: "Against which types is Rock effective?", answers: ["fire", "ice", "flying", "bug"], completed: false },
            { question: "Against which types is Ghost effective?", answers: ["psychic", "ghost"], completed: false },
            { question: "Against which types is Dragon effective?", answers: ["dragon"], completed: false },
            { question: "Against which types is Dark effective?", answers: ["psychic", "ghost"], completed: false },
            { question: "Against which types is Steel effective?", answers: ["ice", "rock", "fairy"], completed: false },
            { question: "Against which types is Fairy effective?", answers: ["fighting", "dragon", "dark"], completed: false },
            { question: "Against which types is Normal not very effective?", answers: ["rock", "steel"], completed: false },
            { question: "Against which types is Fire not very effective?", answers: ["fire", "water", "rock", "dragon"], completed: false },
            { question: "Against which types is Water not very effective?", answers: ["water", "grass", "dragon"], completed: false },
            { question: "Against which types is Grass not very effective?", answers: ["fire", "grass", "poison", "flying", "bug", "dragon", "steel"], completed: false },
            { question: "Against which types is Electric not very effective?", answers: ["electric", "grass", "dragon"], completed: false },
            { question: "Against which types is Ice not very effective?", answers: ["fire", "water", "ice", "steel"], completed: false },
            { question: "Against which types is Fighting not very effective?", answers: ["poison", "flying", "psychic", "bug", "fairy"], completed: false },
            { question: "Against which types is Poison not very effective?", answers: ["poison", "ground", "rock", "ghost"], completed: false },
            { question: "Against which types is Ground not very effective?", answers: ["grass", "bug"], completed: false },
            { question: "Against which types is Flying not very effective?", answers: ["electric", "rock", "steel"], completed: false },
            { question: "Against which types is Psychic not very effective?", answers: ["psychic", "steel"], completed: false },
            { question: "Against which types is Bug not very effective?", answers: ["fire", "fighting", "poison", "flying", "ghost", "steel", "fairy"], completed: false },
            { question: "Against which types is Rock not very effective?", answers: ["fighting", "ground", "steel"], completed: false },
            { question: "Against which types is Ghost not very effective?", answers: ["dark"], completed: false },
            { question: "Against which types is Dragon not very effective?", answers: ["steel"], completed: false },
            { question: "Against which types is Dark not very effective?", answers: ["fighting", "dark", "fairy"], completed: false },
            { question: "Against which types is Steel not very effective?", answers: ["fire", "water", "electric", "steel"], completed: false },
            { question: "Against which types is Fairy not very effective?", answers: ["fire", "poison", "steel"], completed: false },
            { question: "Against which types does Normal have no effect?", answers: ["ghost"], completed: false },
            { question: "Against which types does Electric have no effect?", answers: ["ground"], completed: false },
            { question: "Against which types does Fighting have no effect?", answers: ["ghost"], completed: false },
            { question: "Against which types does Poison have no effect?", answers: ["steel"], completed: false },
            { question: "Against which types does Ground have no effect?", answers: ["flying"], completed: false },
            { question: "Against which types does Psychic have no effect?", answers: ["dark"], completed: false },
            { question: "Against which types does Ghost have no effect?", answers: ["normal"], completed: false },
            { question: "Against which types does Dragon have no effect?", answers: ["fairy"], completed: false },
            { question: "Against which types is Water/Flying (Gyarados) effective?", answers: ["fire", "ground", "rock", "grass", "fighting", "bug"], completed: false },
            { question: "Against which types is Dragon/Ground (Garchomp) effective?", answers: ["dragon", "fire", "electric", "poison", "rock", "steel"], completed: false },
            { question: "Against which types is Steel/Fairy (Mawile) effective?", answers: ["ice", "rock", "fairy", "fighting", "dragon", "dark"], completed: false },
            { question: "Against which types is Ghost/Dark (Sableye) effective?", answers: ["psychic", "ghost"], completed: false },
            { question: "Against which types is Fire/Fighting (Blaziken) effective?", answers: ["grass", "ice", "bug", "steel", "normal", "rock", "dark"], completed: false },
            { question: "Against which types is Grass/Poison (Bulbasaur) effective?", answers: ["water", "ground", "rock", "grass", "fairy"], completed: false },
            { question: "Against which types is Electric/Steel (Magnezone) effective?", answers: ["water", "flying", "ice", "rock", "fairy"], completed: false },
            { question: "Against which types is Bug/Flying (Butterfree) effective?", answers: ["grass", "psychic", "dark", "fighting", "bug"], completed: false },
            { question: "Against which types is Rock/Ground (Rhydon) effective?", answers: ["fire", "ice", "flying", "bug", "electric", "poison", "rock", "steel"], completed: false },
            { question: "Against which types is Psychic/Fairy (Gardevoir) effective?", answers: ["fighting", "poison", "dragon", "dark"], completed: false }
        ];

        let shuffledQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let difficulty = "EASY";

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function startQuiz() {
            document.getElementById("menu").style.display = "none";
            document.getElementById("quiz").style.display = "block";
            score = 0;
            document.getElementById("score-value").textContent = score;

            if (difficulty === "EASY") {
                // Single-type, super effective only, no multi-type Pokémon
                shuffledQuestions = shuffle(
                    allQuestions.filter(q =>
                        q.question.startsWith("Against which types is ") && 
                        q.question.includes(" effective?") && 
                        !q.question.includes("(") // Exclude multi-type Pokémon
                    ).slice(0, 18) // Ensure exactly 18 questions
                );
            } else if (difficulty === "NORMAL") {
                // Single-type, super effective + not very effective, no multi-type Pokémon
                shuffledQuestions = shuffle(
                    allQuestions.filter(q =>
                        q.question.startsWith("Against which types is ") && 
                        (q.question.includes(" effective?") || q.question.includes("not very effective?")) && 
                        !q.question.includes("(") // Exclude multi-type Pokémon
                    )
                );
            } else { // HARD
                // Include all questions
                shuffledQuestions = shuffle([...allQuestions]);
            }

            document.getElementById("total-questions").textContent = shuffledQuestions.length;
            currentQuestionIndex = 0;
            loadQuestion();
        }

        function loadQuestion() {
            const question = shuffledQuestions[currentQuestionIndex];
            document.getElementById("question").textContent = question.question;
            document.getElementById("current-question").textContent = currentQuestionIndex + 1;
            const slotsDiv = document.getElementById("slots");
            slotsDiv.innerHTML = "";
            if (question.answers.length === 0) {
                slotsDiv.textContent = "None";
            } else {
                question.answers.forEach(() => {
                    const slot = document.createElement("div");
                    slot.className = "slot";
                    slot.onclick = removeFromSlot;
                    slotsDiv.appendChild(slot);
                });
            }
            document.getElementById("next").style.display = "none";
            document.getElementById("result").textContent = "";
            resetIcons();
        }

        function resetIcons() {
            const icons = document.querySelectorAll(".type-icon");
            icons.forEach(icon => {
                icon.style.opacity = "1";
                icon.onclick = addToSlot;
            });
        }

        function addToSlot(e) {
            const type = e.target.dataset.type;
            const slots = document.querySelectorAll(".slot");
            for (let slot of slots) {
                if (!slot.querySelector("img")) {
                    const img = document.createElement("img");
                    img.src = e.target.src;
                    img.className = "type-icon";
                    img.dataset.type = type;
                    img.style.opacity = "0.5";
                    img.onclick = removeFromSlot;
                    slot.appendChild(img);
                    e.target.style.opacity = "0.5";
                    e.target.onclick = null;
                    break;
                }
            }
        }

        function removeFromSlot(e) {
            const target = e.target;
            if (target.className === "type-icon" && target.parentNode.className === "slot") {
                const slot = target.parentNode;
                const type = target.dataset.type;
                slot.removeChild(target);
                const originalIcon = document.querySelector(`.type-icon[data-type="${type}"]`);
                originalIcon.style.opacity = "1";
                originalIcon.onclick = addToSlot;
            } else if (target.className === "slot" && target.querySelector("img")) {
                const img = target.querySelector("img");
                const type = img.dataset.type;
                target.removeChild(img);
                const originalIcon = document.querySelector(`.type-icon[data-type="${type}"]`);
                originalIcon.style.opacity = "1";
                originalIcon.onclick = addToSlot;
            }
        }

        function checkAnswer() {
            const question = shuffledQuestions[currentQuestionIndex];
            if (question.completed) {
                document.getElementById("result").textContent = "You've already scored this question!";
                return;
            }

            if (question.answers.length === 0) {
                document.getElementById("result").textContent = "Correct! This type has no such matchups.";
                score += 10;
                question.completed = true;
                document.getElementById("score-value").textContent = score;
                document.getElementById("next").style.display = "inline";
                return;
            }

            const slots = document.querySelectorAll(".slot");
            let userAnswers = [];
            slots.forEach(slot => {
                const img = slot.querySelector("img");
                if (img) userAnswers.push(img.dataset.type);
            });

            if (userAnswers.length !== question.answers.length) {
                document.getElementById("result").textContent = "Please fill all slots!";
                return;
            }

            const correct = userAnswers.every(answer => question.answers.includes(answer)) &&
                            question.answers.every(answer => userAnswers.includes(answer));
            if (correct) {
                document.getElementById("result").textContent = "Correct! Well done!";
                score += 10;
                question.completed = true;
                document.getElementById("score-value").textContent = score;
                document.getElementById("next").style.display = "inline";
            } else {
                document.getElementById("result").textContent = `Wrong! Correct answers: ${question.answers.join(", ")}. -5 points.`;
                score -= 5;
                if (score < 0) score = 0;
                document.getElementById("score-value").textContent = score;
            }
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex >= shuffledQuestions.length) {
                document.getElementById("question").textContent = "Quiz Complete!";
                document.getElementById("slots").innerHTML = "";
                document.getElementById("result").textContent = `Final Score: ${score}`;
                document.getElementById("check").style.display = "none";
                document.getElementById("next").style.display = "none";
                updateHighScores(score, difficulty);
                return;
            }
            loadQuestion();
        }

        function updateHighScores(newScore, diff) {
            const key = `pokemonTypeQuizHighScores${diff}`;
            let scores = JSON.parse(localStorage.getItem(key)) || [];
            scores.push(newScore);
            scores.sort((a, b) => b - a);
            scores = scores.slice(0, 10);
            localStorage.setItem(key, JSON.stringify(scores));
        }

        function showScores() {
            document.getElementById("menu").style.display = "none";
            document.getElementById("scores-menu").style.display = "block";
            const tbody = document.getElementById("scores-body");
            tbody.innerHTML = "";

            const easyScores = JSON.parse(localStorage.getItem("pokemonTypeQuizHighScoresEASY")) || [];
            const normalScores = JSON.parse(localStorage.getItem("pokemonTypeQuizHighScoresNORMAL")) || [];
            const hardScores = JSON.parse(localStorage.getItem("pokemonTypeQuizHighScoresHARD")) || [];

            for (let i = 0; i < 10; i++) {
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${i + 1}</td>
                    <td>${easyScores[i] || 0}</td>
                    <td>${normalScores[i] || 0}</td>
                    <td>${hardScores[i] || 0}</td>
                `;
                tbody.appendChild(row);
            }
        }

        function showMainMenu() {
            document.getElementById("quiz").style.display = "none";
            document.getElementById("scores-menu").style.display = "none";
            document.getElementById("menu").style.display = "block";
        }

        // Menu interactions
        document.getElementById("play-button").onclick = startQuiz;
        document.getElementById("difficulty-button").onclick = function() {
            if (difficulty === "EASY") {
                difficulty = "NORMAL";
                this.textContent = "NORMAL";
            } else if (difficulty === "NORMAL") {
                difficulty = "HARD";
                this.textContent = "HARD";
            } else {
                difficulty = "EASY";
                this.textContent = "EASY";
            }
        };
        document.getElementById("scores-button").onclick = showScores;
        document.getElementById("quiz-back-button").onclick = showMainMenu;
        document.getElementById("scores-back-button").onclick = showMainMenu;

        document.querySelectorAll(".type-icon").forEach(icon => {
            icon.onclick = addToSlot;
        });
    </script>
</body>
</html>
